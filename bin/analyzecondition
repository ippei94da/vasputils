#! /usr/bin/env ruby
# coding: utf-8

#require "rubygems"
#gem "vasputils"
#require "vasputils.rb"

#ファイルの中身が try?? の最後が最新の計算結果であることを前提とする。
#result みたいな名前にしてると動かない。
#どうしても別の名前にするのなら symlink にしておくことを勧める。
#
#今後としては、サブディレクトリ以下の全ての OUTCAR を含む計算ディレクトリを列挙し、Iter 1 で終わっていたら収束した計算の条件であるとする。

#geomopt で finished になっていることを確認
#latest_dir を取得。
#その計算条件の kpoints, encut, toten を取得。

まとめて表という形にはしない。
  結局のところ、どの条件を揃えてどの条件を振るかだから
  多次元関数になる。
  Array などにまとめなおす意味があまりない。

k点、ENCUT 以外は全て一緒であることを仮定する。

k 点のリストを取得。
  本来なら対称性に合わせて ka, kb, kc を別々に扱える必要がある。

[400, 500, 600].each do |encut|
  計算全部から encut にマッチするのを抽出し、
  [1.0/k 点数, TOTEN] の Array を作成。
  これを配列にした二重配列にして least_square_1st_degree にかける。
  出力する。
end

[1, 8, 64].each do |n_k|
  encut と同じようにやる。
end

