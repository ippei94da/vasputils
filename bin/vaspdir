#! /usr/bin/env ruby
# coding: utf-8

# Manipulate VaspDir from command line.

require "comana"
require "fileutils"
require "optparse"
require "pp"
require "rubygems"
require "vasputils"

def show_usage
    puts <<-HERE
USAGE
    vaspdir command [option] [path]

E.G.,
    vaspdir show [option] [path]
    vaspdir run [path]
    vaspdir clean [path]
        delete output files of vasp command.
    vaspdir initialize [path]
        delete except for four input files; INCAR, KPOINTS, POSCAR, POTCAR.

    If [path] is not explicitely indicated, "." would be used.
    HERE
end

command = ARGV.shift

case command
when "show"
    VaspUtils::VaspDir.show_inspect(ARGV)
when "run"
    VaspUtils::VaspDir.run(ARGV)
when "clean"
    VaspUtils::VaspDir.reset_clean(ARGV)
when "initialize"
    VaspUtils::VaspDir.reset_initialize(ARGV)
#when "poscar"
#    #VaspUtils::VaspDir.show_inspect(ARGV)
#    #pp VaspUtils::VaspDir.poscar(ARGV)
when "--help"
    show_usage
else
    puts "Unknown command: #{command}"
    show_usage
end

exit
